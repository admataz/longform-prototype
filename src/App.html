<div class="app-options">
	<select bind:value=navStyle>
			<option value="snap">snap</option>
		<option value="scroll">scroll</option>
		<option value="click">click</option>
	</select>
</div>
<div id="app" class="nav-{navStyle}">
	{#if (navStyle==="scroll" || navStyle==="snap")}
	<div class="page">
		<Ch000000 />
	</div>
	<div class="page">
		<Ch000001 />
	</div>
	<div class="page">
		<Ch001001 />
	</div>
	<div class="page">
		<Ch001002 />
	</div>
	<div class="page">
		<Ch001003 />
	</div>
	<div class="page">
		<Ch001004 />
	</div>
	<div class="page">
		<Ch001005 />
	</div>
	<div class="page">
		<Ch001006 />
	</div>
	<div class="page">
		<Ch001007 />
	</div>
	<div class="page">
		<Ch001008 />
	</div>
	<div class="page">
		<Ch002001 />
	</div>
	<div class="page">
		<Ch002002 />
	</div>
	<div class="page">
		<Ch002003 />
	</div>
	<div class="page">
		<Ch002004 />
	</div>
	<div class="page">
		<Ch0025001 />
	</div>
	<div class="page">
		<Ch0025002 />
	</div>
	<div class="page">
		<Ch003001 />
	</div>
	<div class="page">
		<Ch003002 />
	</div>
	<div class="page">
		<Ch003003 />
	</div>
	<div class="page">
		<Ch003004 />
	</div>
	{/if}

	{#if (navStyle==="click")}
	<div class="page" >
			<svelte:component this="{c[navOrder[navIndex]]}"  />
	</div>

	<div class="nav-bar">
		{navOrder[navIndex]}
		<a href="#" on:click|preventDefault="nav(-1)">prev</a>
		<a href="#" on:click|preventDefault="nav(1)">next</a>
	</div>
	{/if}

</div>


<style>
	.app-options {
		padding: 2px 8px;
		background: #999;
		position: fixed;
		bottom: 0;
		width: 100vw;
	}

	.nav-bar {
		padding: 2px 8px;
		background: #000;
		position: fixed;
		top: 0;
		width: 100vw;
	}

	.nav-bar a {
		color: #fff;
	}

	h1 {
		color: red;
	}

	#app {
		box-sizing: border-box;
		height: 100vh;
		overflow: auto;
	}

	#app.nav-snap {
		scroll-snap-type: y mandatory;

	}

	#app.nav-snap .page {
		scroll-snap-align: start
	}

	#app.nav-click .page {
		margin-bottom: 0;
	}

	.page {
		height: 100vh;
		width: 100vw;
		box-sizing: border-box;
		border: 1px solid #999;
		padding: 1em;
		color: #fff;
		margin-bottom: 200px;
		background-color: #000
	}

	:global(.textbody){
		width: 44rem;
		max-height: 80%;
		overflow: auto;
	}
</style>

<script>
	import Ch000000 from './pages/ch-000-000-loading.html'
	import Ch000001 from './pages/ch-000-001-title.html'
	import Ch001001 from './pages/ch-001-001-title.html'
	import Ch001002 from './pages/ch-001-002-introduction.html'
	import Ch001003 from './pages/ch-001-003-provoke-interest.html'
	import Ch001004 from './pages/ch-001-004-meet-main-character.html'
	import Ch001005 from './pages/ch-001-005-role-of-chv.html'
	import Ch001006 from './pages/ch-001-006-introduce-data.html'
	import Ch001007 from './pages/ch-001-007-return-to-chv.html'
	import Ch001008 from './pages/ch-001-008-big-picture.html'
	import Ch002001 from './pages/ch-002-001-title.html'
	import Ch002002 from './pages/ch-002-002-background-history.html'
	import Ch002003 from './pages/ch-002-003-what-is-er.html'
	import Ch002004 from './pages/ch-002-004-how-er-works.html'
	import Ch0025001 from './pages/ch-0025-001-title.html'
	import Ch0025002 from './pages/ch-0025-002-introducing-navrongo.html'
	import Ch003001 from './pages/ch-003-001-research-in-practice-1.html'
	import Ch003002 from './pages/ch-003-002-research-in-practice-2.html'
	import Ch003003 from './pages/ch-003-003-research-in-practice-3.html'
	import Ch003004 from './pages/ch-003-004-research-in-practice-4.html'

	export default {
		components: {
			Ch000000,
			Ch000001,
			Ch001001,
			Ch001002,
			Ch001003,
			Ch001004,
			Ch001005,
			Ch001006,
			Ch001007,
			Ch001008,
			Ch002001,
			Ch002002,
			Ch002003,
			Ch002004,
			Ch0025001,
			Ch0025002,
			Ch003001,
			Ch003002,
			Ch003003,
			Ch003004
		},
		data() {
			return {
				navOrder: [
					'Ch000000',
					'Ch000001',
					'Ch001001',
					'Ch001002',
					'Ch001003',
					'Ch001004',
					'Ch001005',
					'Ch001006',
					'Ch001007',
					'Ch001008',
					'Ch002001',
					'Ch002002',
					'Ch002003',
					'Ch002004',
					'Ch0025001',
					'Ch0025002',
					'Ch003001',
					'Ch003002',
					'Ch003003',
					'Ch003004',
				],
				navIndex: 0,
				c: {
					Ch000000,
					Ch000001,
					Ch001001,
					Ch001002,
					Ch001003,
					Ch001004,
					Ch001005,
					Ch001006,
					Ch001007,
					Ch001008,
					Ch002001,
					Ch002002,
					Ch002003,
					Ch002004,
					Ch0025001,
					Ch0025002,
					Ch003001,
					Ch003002,
					Ch003003,
					Ch003004
				}
			}
		},
		methods: {
			nav(dir) {
				const {navOrder, navIndex} = this.get()
				if (navIndex + dir < 0 || navIndex + dir > navOrder.length-1) return
				this.set({
					navIndex: navIndex + dir
				})
			}
		}

	}
</script>